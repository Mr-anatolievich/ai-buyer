# üîë –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –∑ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –≤–∞–ª—ñ–¥–Ω–æ–≥–æ Facebook —Ç–æ–∫–µ–Ω–∞

## –ü—Ä–æ–±–ª–µ–º–∞
–ü–æ—Ç–æ—á–Ω–∏–π —Ç–æ–∫–µ–Ω `EAABsbCS1iHgBPjQA35bfht...` –Ω–µ –ø—Ä–∞—Ü—é—î –∑ Facebook Graph API.
Facebook –ø–æ–≤–µ—Ä—Ç–∞—î –ø–æ–º–∏–ª–∫—É: `{"error":{"message":"Invalid request.","type":"OAuthException","code":1}}`

## –ü—Ä–∏—á–∏–Ω–∏ —á–æ–º—É —Ç–æ–∫–µ–Ω –º–æ–∂–µ –Ω–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏:
1. **–¢–µ—Ä–º—ñ–Ω –¥—ñ—ó –≤–∏—á–µ—Ä–ø–∞–≤—Å—è** - User Access Tokens –∑–∞–∑–≤–∏—á–∞–π –¥—ñ—é—Ç—å 1-2 –≥–æ–¥–∏–Ω–∏
2. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ñ –¥–æ–∑–≤–æ–ª–∏** - —Ç–æ–∫–µ–Ω –Ω–µ –º–∞—î –¥–æ–∑–≤–æ–ª—É `ads_read` –¥–ª—è –¥–æ—Å—Ç—É–ø—É –¥–æ —Ä–µ–∫–ª–∞–º–Ω–∏—Ö –∫–∞–±—ñ–Ω–µ—Ç—ñ–≤
3. **–¢–∏–ø —Ç–æ–∫–µ–Ω–∞** - –ø–æ—Ç—Ä—ñ–±–µ–Ω User Access Token –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º–∏ scope
4. **Facebook App –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è** - app –º–æ–∂–µ –±—É—Ç–∏ –Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π –¥–ª—è Business API

## ‚úÖ –Ø–∫ –æ—Ç—Ä–∏–º–∞—Ç–∏ –≤–∞–ª—ñ–¥–Ω–∏–π —Ç–æ–∫–µ–Ω:

### –°–ø–æ—Å—ñ–± 1: Facebook Graph API Explorer (–ù–∞–π–ª–µ–≥—à–∏–π)
1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ https://developers.facebook.com/tools/explorer/
2. –û–±–µ—Ä—ñ—Ç—å –≤–∞—à—É Facebook App
3. –£ –ø–æ–ª—ñ "Permissions" –¥–æ–¥–∞–π—Ç–µ:
   - `ads_read` (–¥–ª—è —á–∏—Ç–∞–Ω–Ω—è —Ä–µ–∫–ª–∞–º–Ω–∏—Ö –∫–∞–±—ñ–Ω–µ—Ç—ñ–≤)
   - `business_management` (–¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –±—ñ–∑–Ω–µ—Å-–∞–∫–∞—É–Ω—Ç–∞–º–∏)
   - `pages_read_engagement` (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–µ–Ω –¥–æ—Å—Ç—É–ø –¥–æ —Å—Ç–æ—Ä—ñ–Ω–æ–∫)
4. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "Generate Access Token"
5. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å —ñ –Ω–∞–¥–∞–π—Ç–µ –¥–æ–∑–≤–æ–ª–∏
6. –°–∫–æ–ø—ñ—é–π—Ç–µ –æ—Ç—Ä–∏–º–∞–Ω–∏–π —Ç–æ–∫–µ–Ω

### –°–ø–æ—Å—ñ–± 2: Facebook Business Manager
1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ Facebook Business Manager
2. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è ‚Üí –°–∏—Å—Ç–µ–º–∏ ‚Üí –ë—ñ–∑–Ω–µ—Å-—ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó
3. –°—Ç–≤–æ—Ä—ñ—Ç—å —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑ –ø—Ä–∞–≤–∞–º–∏ `ads_read`
4. –ó–≥–µ–Ω–µ—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

### –°–ø–æ—Å—ñ–± 3: OAuth 2.0 Flow (–ü—Ä–æ–≥—Ä–∞–º–Ω–∏–π)
```javascript
// URL –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
const authUrl = `https://www.facebook.com/v19.0/dialog/oauth?
  client_id={app-id}&
  redirect_uri={redirect-uri}&
  scope=ads_read,business_management&
  response_type=code`;

// –ü—ñ—Å–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó –æ–±–º—ñ–Ω—è–π—Ç–µ code –Ω–∞ access_token
const tokenUrl = `https://graph.facebook.com/v19.0/oauth/access_token?
  client_id={app-id}&
  client_secret={app-secret}&
  redirect_uri={redirect-uri}&
  code={authorization-code}`;
```

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –Ω–æ–≤–æ–≥–æ —Ç–æ–∫–µ–Ω–∞:

–ü—ñ—Å–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –Ω–æ–≤–æ–≥–æ —Ç–æ–∫–µ–Ω–∞, –ø—Ä–æ—Ç–µ—Å—Ç—É–π—Ç–µ –π–æ–≥–æ:

```bash
# 1. –ó–±–µ—Ä–µ–∂—ñ—Ç—å —Ç–æ–∫–µ–Ω —É –∑–º—ñ–Ω–Ω—É
export FB_TOKEN="–≤–∞—à_–Ω–æ–≤–∏–π_—Ç–æ–∫–µ–Ω"

# 2. –ü—Ä–æ—Ç–µ—Å—Ç—É–π—Ç–µ –±–∞–∑–æ–≤–∏–π –¥–æ—Å—Ç—É–ø
curl "https://graph.facebook.com/v19.0/me?access_token=$FB_TOKEN"

# 3. –ü—Ä–æ—Ç–µ—Å—Ç—É–π—Ç–µ –¥–æ—Å—Ç—É–ø –¥–æ —Ä–µ–∫–ª–∞–º–Ω–∏—Ö –∫–∞–±—ñ–Ω–µ—Ç—ñ–≤
curl "https://graph.facebook.com/v19.0/me/adaccounts?access_token=$FB_TOKEN&fields=id,name,account_status"

# 4. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –¥–æ–∑–≤–æ–ª–∏
curl "https://graph.facebook.com/v19.0/me/permissions?access_token=$FB_TOKEN"
```

## üöÄ –ö–æ–ª–∏ –æ—Ç—Ä–∏–º–∞—î—Ç–µ –≤–∞–ª—ñ–¥–Ω–∏–π —Ç–æ–∫–µ–Ω:

1. –ó–∞–ø—É—Å—Ç—ñ—Ç—å –Ω–∞—à —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è:
```bash
python3 debug_token.py –ù–û–í–ò–ô_–¢–û–ö–ï–ù
```

2. –Ø–∫—â–æ —Ç–µ—Å—Ç –ø—Ä–æ–π–¥–µ —É—Å–ø—ñ—à–Ω–æ, –æ–Ω–æ–≤—ñ—Ç—å –±–∞–∑—É –¥–∞–Ω–∏—Ö:
```bash
python3 -c "
import sqlite3
token = '–ù–û–í–ò–ô_–¢–û–ö–ï–ù'
conn = sqlite3.connect('ai_buyer.db')
conn.execute('UPDATE facebook_accounts SET access_token = ? WHERE id = 8', (token,))
conn.commit()
print('‚úÖ –¢–æ–∫–µ–Ω –æ–Ω–æ–≤–ª–µ–Ω–æ!')
"
```

3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å backend —ñ —Ç–µ—Å—Ç—É–π—Ç–µ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª —Ä–µ–∫–ª–∞–º–Ω–∏—Ö –∫–∞–±—ñ–Ω–µ—Ç—ñ–≤

## üìã –ù–µ–æ–±—Ö—ñ–¥–Ω—ñ –¥–æ–∑–≤–æ–ª–∏ –¥–ª—è —Ä–æ–±–æ—Ç–∏:
- `ads_read` - —á–∏—Ç–∞–Ω–Ω—è —Ä–µ–∫–ª–∞–º–Ω–∏—Ö –∫–∞–±—ñ–Ω–µ—Ç—ñ–≤
- `business_management` - —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –±—ñ–∑–Ω–µ—Å-–∞–∫–∞—É–Ω—Ç–∞–º–∏  
- `pages_read_engagement` - –¥–æ—Å—Ç—É–ø –¥–æ —Å—Ç–æ—Ä—ñ–Ω–æ–∫ (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

## ‚ö†Ô∏è –í–∞–∂–ª–∏–≤–æ:
- User Access Tokens –º–∞—é—Ç—å –∫–æ—Ä–æ—Ç–∫–∏–π —Ç–µ—Ä–º—ñ–Ω –¥—ñ—ó (1-2 –≥–æ–¥–∏–Ω–∏)
- –î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ Long-lived tokens –∞–±–æ —Å–∏—Å—Ç–µ–º–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å —â–æ –≤–∞—à–∞ Facebook App –º–∞—î –¥–æ—Å—Ç—É–ø –¥–æ Marketing API