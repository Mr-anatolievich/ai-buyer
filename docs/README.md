# üéØ AI-Buyer: Hybrid Rules-ML Facebook Advertising Platform

AI-Buyer - —Ü–µ enterprise –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó Facebook —Ä–µ–∫–ª–∞–º–∏, —â–æ –ø–æ—î–¥–Ω—É—î –ø–æ—Ç—É–∂–Ω—ñ—Å—Ç—å Rules Engine –∑ —ñ–Ω—Ç–µ–ª–µ–∫—Ç–æ–º Machine Learning. –†–æ–∑—Ä–æ–±–ª–µ–Ω–∞ –¥–ª—è –æ–±—Ä–æ–±–∫–∏ **100+ –∫–ª—ñ—î–Ω—Ç—ñ–≤** —Ç–∞ **10,000+ –∫–∞–º–ø–∞–Ω—ñ–π** –æ–¥–Ω–æ—á–∞—Å–Ω–æ –∑ real-time –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–º –≤–∏–∫–æ–Ω–∞–Ω–Ω—è–º –¥—ñ–π.

## üèóÔ∏è Hybrid Architecture Overview

### **Core: Rules Engine + ML Support**
```
üéõÔ∏è Rules Engine (Primary Logic)
‚îú‚îÄ‚îÄ Rule Definition & Management
‚îú‚îÄ‚îÄ Real-time Rule Evaluation  
‚îú‚îÄ‚îÄ Action Execution Engine
‚îî‚îÄ‚îÄ Rule Performance Analytics

ü§ñ ML Layer (Supporting Intelligence)
‚îú‚îÄ‚îÄ Anomaly Detection (—Å—Ç–∞—Ç–∏—Å—Ç–∏—á–Ω–µ + ML)
‚îú‚îÄ‚îÄ Performance Prediction (LightGBM)
‚îú‚îÄ‚îÄ Smart Rule Suggestions (OpenAI API)
‚îî‚îÄ‚îÄ Pattern Recognition (–¥–ª—è –Ω–æ–≤–∏—Ö –ø—Ä–∞–≤–∏–ª)
```

## üöÄ Key Features

### **Rules Engine (Primary)**
- **Custom Rules**: –ì–Ω—É—á–∫–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –±—ñ–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª –¥–ª—è –∫–∞–º–ø–∞–Ω—ñ–π
- **Real-time Evaluation**: –ú–∏—Ç—Ç—î–≤–∞ –æ—Ü—ñ–Ω–∫–∞ –ø—Ä–∞–≤–∏–ª –ø—Ä–∏ –æ–Ω–æ–≤–ª–µ–Ω–Ω—ñ –º–µ—Ç—Ä–∏–∫
- **Automated Actions**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –¥—ñ–π (pause, budget, creative rotation)
- **Rule Performance Tracking**: –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ –∫–æ–∂–Ω–æ–≥–æ –ø—Ä–∞–≤–∏–ª–∞

### **ML Enhancement (Supporting)**
- **Smart Anomaly Detection**: ML + —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–Ω–µ –≤–∏—è–≤–ª–µ–Ω–Ω—è –∞–Ω–æ–º–∞–ª—ñ–π
- **Action Outcome Prediction**: –ü—Ä–æ–≥–Ω–æ–∑ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ –ø–µ—Ä–µ–¥ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è–º –¥—ñ—ó
- **Rule Optimization**: ML-based –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ –ø—Ä–∞–≤–∏–ª
- **Pattern Recognition**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó –Ω–æ–≤–∏—Ö –ø—Ä–∞–≤–∏–ª

### **Enterprise Infrastructure**
- **ClickHouse**: –®–≤–∏–¥–∫—ñ –∑–∞–ø–∏—Ç–∏ –ø–æ 10K+ –∫–∞–º–ø–∞–Ω—ñ—è—Ö
- **Kafka Streaming**: Real-time –æ–±—Ä–æ–±–∫–∞ –º–µ—Ç—Ä–∏–∫ –∑ Facebook API
- **Redis Cluster**: –ö–µ—à—É–≤–∞–Ω–Ω—è –ø—Ä–∞–≤–∏–ª —Ç–∞ —Å–µ—Å—ñ–π
- **Celery Workers**: –ú–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω—ñ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è
- **Docker Swarm**: Production orchestration

### **Advanced Monitoring**
- **Real-time Dashboard**: Live –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –≤—Å—ñ—Ö –∫–∞–º–ø–∞–Ω—ñ–π —Ç–∞ –ø—Ä–∞–≤–∏–ª
- **Performance Analytics**: Deep dive –≤ –µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó
- **Client Reporting**: –ü–µ—Ä—Å–æ–Ω–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –∑–≤—ñ—Ç–∏ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –∫–ª—ñ—î–Ω—Ç–∞
- **Alert System**: –Ü–Ω—Ç–µ–ª–µ–∫—Ç—É–∞–ª—å–Ω—ñ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è —Ç–∞ escalation

## üìã –ü–µ—Ä–µ–¥—É–º–æ–≤–∏

## üìä Technical Stack

### **Backend Services**
```yaml
Core Services:
  Rules Engine:         FastAPI + Python 3.13
  ML Prediction Service: LightGBM + MLflow
  Facebook API Client:   Meta Business SDK
  Action Executor:      Celery Workers
  
Infrastructure:
  Database:            ClickHouse (analytics) + PostgreSQL (transactional)
  Streaming:           Apache Kafka + Zookeeper
  Cache:               Redis Cluster
  Queue:               Celery + Redis Broker
  Monitoring:          Prometheus + Grafana
```

### **Frontend Stack**
```yaml
Framework:            React 18 + TypeScript
Build Tool:           Vite
UI Library:           Shadcn/UI + TailwindCSS
State Management:     Zustand
Data Fetching:        React Query
Charts:               Recharts + Plotly.js
```

### **ML Infrastructure**
```yaml
Training:             MLflow + Jupyter
Models:               LightGBM, Prophet, scikit-learn
Feature Store:        ClickHouse materialized views
Model Serving:        FastAPI + uvicorn
Experimentation:      A/B testing framework
```

### **DevOps & Production**
```yaml
Containerization:     Docker + Docker Compose
Orchestration:        Docker Swarm / Kubernetes
CI/CD:                GitHub Actions
Monitoring:           Prometheus + Grafana + AlertManager
Logging:              ELK Stack (Elasticsearch + Logstash + Kibana)
Load Balancing:       Nginx + HAProxy
```

## üèóÔ∏è Architecture Deep Dive

### **Rules Engine Flow**
```mermaid
graph TD
    A[Facebook API] --> B[Kafka Stream]
    B --> C[Rules Evaluation Engine]
    C --> D{Rule Triggered?}
    D -->|Yes| E[ML Confidence Check]
    D -->|No| F[Continue Monitoring]
    E --> G{Confidence > Threshold?}
    G -->|Yes| H[Execute Action]
    G -->|No| I[Log Skip Decision]
    H --> J[Facebook API Action]
    J --> K[Log & Monitor Result]
```

### **Data Flow Architecture**
```mermaid
graph LR
    subgraph "Data Ingestion"
        A[Facebook Ads API] --> B[Kafka Producer]
        B --> C[ClickHouse Sink]
    end
    
    subgraph "Rules Processing"
        C --> D[Rules Engine]
        D --> E[ML Predictor]
        E --> F[Action Queue]
    end
    
    subgraph "Action Execution"
        F --> G[Celery Workers]
        G --> H[Facebook API Client]
        H --> I[Results Tracking]
    end
```

## üìã System Requirements

### **Production Environment**
- **CPU**: 16+ cores (Intel Xeon –∞–±–æ AMD EPYC)
- **Memory**: 64GB+ RAM
- **Storage**: 1TB+ NVMe SSD (database), 500GB+ SSD (logs)
- **Network**: 1Gbps+ bandwidth
- **OS**: Ubuntu 22.04 LTS –∞–±–æ RHEL 9

### **Development Environment**
- **CPU**: 8+ cores
- **Memory**: 16GB+ RAM  
- **Storage**: 100GB+ SSD
- **OS**: macOS, Ubuntu, –∞–±–æ Windows –∑ WSL2

### **External Dependencies**

- **Facebook Marketing API**: Business Manager access
- **ClickHouse Cloud**: –ê–±–æ self-hosted cluster  
- **Redis Cloud**: –ê–±–æ self-hosted cluster
- **Kafka**: Confluent Cloud –∞–±–æ self-hosted
- **MLflow Tracking Server**: For model management

## üöÄ Quick Start

### **1. Local Development Setup**

```bash
# Clone repository
git clone https://github.com/your-org/ai-buyer.git
cd ai-buyer

# Setup environment
cp .env.development .env.local
# Edit .env.local with your Facebook API credentials

# Start with ML support
./start-local.sh
```

**Access URLs:**
- Frontend: http://localhost:8080
- Backend API: http://localhost:8000  
- API Docs: http://localhost:8000/docs
- ML Models Status: http://localhost:8000/api/v1/models/status

### **2. Production Deployment**

```bash
# Production environment setup
cp .env.production .env
# Configure production variables

# Deploy with Docker Swarm
docker swarm init
docker stack deploy -c docker-compose.prod.yml ai-buyer

# Or with Kubernetes
kubectl apply -f k8s/
```

### **3. Configuration**

#### **Facebook API Setup**
```bash
# Required environment variables:
FACEBOOK_APP_ID=your_app_id
FACEBOOK_APP_SECRET=your_app_secret  
FACEBOOK_ACCESS_TOKEN=your_access_token
FACEBOOK_AD_ACCOUNT_ID=your_ad_account_id
```

#### **Database Configuration**
```bash
# ClickHouse
CLICKHOUSE_HOST=localhost
CLICKHOUSE_PORT=9000
CLICKHOUSE_DATABASE=ai_buyer

# PostgreSQL (for rules storage)
POSTGRES_HOST=localhost
POSTGRES_DATABASE=ai_buyer_rules
POSTGRES_USER=ai_buyer
POSTGRES_PASSWORD=secure_password
```

#### **Kafka Streaming**
```bash
KAFKA_BOOTSTRAP_SERVERS=localhost:9092
KAFKA_TOPIC_PREFIX=ai_buyer
KAFKA_CONSUMER_GROUP=ai_buyer_rules_engine
```

## üéØ Usage Examples

### **Creating a Performance Rule**

```python
# Example: Auto-pause low-performing campaigns
rule = {
    "name": "Auto-pause Low CTR Campaigns",
    "conditions": [
        {
            "metric": "ctr",
            "operator": "<", 
            "value": 1.0,
            "time_window": "24h",
            "min_impressions": 1000
        }
    ],
    "actions": [
        {
            "type": "pause_campaign",
            "params": {"reason": "Low CTR performance"}
        },
        {
            "type": "notify_client", 
            "params": {"message": "Campaign paused due to low CTR"}
        }
    ],
    "ml_enhancement": {
        "use_prediction": True,
        "confidence_threshold": 0.8
    }
}

# Create rule via API
response = requests.post(
    "http://localhost:8000/api/v1/rules", 
    json=rule,
    headers={"Authorization": f"Bearer {access_token}"}
)
```

### **Monitoring Rule Performance**

```bash
# Get all active rules
curl "http://localhost:8000/api/v1/rules?status=active" | jq .

# Check rule execution history  
curl "http://localhost:8000/api/v1/rules/{rule_id}/executions" | jq .

# View rule performance metrics
curl "http://localhost:8000/api/v1/rules/{rule_id}/performance" | jq .
```

### **ML-Enhanced Decision Making**

```python
# Example: Smart budget reallocation with ML prediction
rule = {
    "name": "Smart Budget Optimization",
    "conditions": [
        {
            "metric": "roas",
            "operator": ">", 
            "value": 3.0,
            "time_window": "7d"
        }
    ],
    "actions": [
        {
            "type": "increase_budget",
            "params": {
                "increase_by_percent": 20,
                "max_daily_budget": 1000
            }
        }
    ],
    "ml_enhancement": {
        "use_prediction": True,
        "prediction_horizon": "7d",
        "confidence_threshold": 0.75,
        "fallback_to_rule": True
    }
}
```

## üìä Performance Benchmarks

### **System Throughput**
- **Rules Evaluation**: 1,000+ campaigns/second
- **Action Execution**: 100+ actions/second  
- **Data Ingestion**: 10,000+ events/second
- **ML Predictions**: 500+ predictions/second

### **Latency Targets**
- **Rule Evaluation**: <100ms p95
- **Facebook API Actions**: <5s p95
- **Dashboard Loading**: <2s p95
- **Real-time Updates**: <1s p95

### **Scalability**
- **Campaigns**: 10,000+ concurrent
- **Clients**: 100+ simultaneous  
- **Rules**: 1,000+ active rules
- **Daily Events**: 10M+ processed

## üõ† Development Workflow

### **Local Development**

```bash
# Start development environment
./start-local.sh

# Run tests
make test

# Code quality checks
make lint
make type-check

# Database migrations
make migrate

# Stop services
./stop-local.sh
```

### **Testing Strategy**

```bash
# Unit tests
pytest backend/tests/unit/

# Integration tests  
pytest backend/tests/integration/

# End-to-end tests
npm run test:e2e

# Load testing
make load-test

# ML model validation
python -m pytest backend/tests/ml/
```

### **Code Quality**

```bash
# Backend (Python)
black backend/          # Code formatting
flake8 backend/         # Linting  
mypy backend/           # Type checking
safety check            # Security audit

# Frontend (TypeScript)
npm run lint            # ESLint
npm run type-check      # TypeScript
npm run audit           # Security audit
```

## üîç Monitoring & Observability

### **Application Metrics**
- **Rules Engine**: Evaluation latency, success rate, action execution times
- **ML Models**: Prediction accuracy, inference latency, model drift detection
- **Facebook API**: Rate limits, success rates, response times
- **System Health**: CPU, memory, disk usage, network throughput

### **Business Metrics**
- **Campaign Performance**: CTR improvements, ROAS optimization, cost savings
- **Rule Effectiveness**: Success rate per rule, ROI impact, client satisfaction
- **System Efficiency**: Automated actions vs manual interventions

### **Alerting Rules**

```yaml
# Example Prometheus alerting rules
groups:
  - name: ai-buyer-rules-engine
    rules:
      - alert: HighRuleEvaluationLatency
        expr: histogram_quantile(0.95, rules_evaluation_duration_seconds) > 0.1
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: "Rule evaluation latency is high"
          
      - alert: FacebookAPIRateLimitApproaching  
        expr: facebook_api_rate_limit_remaining < 100
        for: 1m
        labels:
          severity: critical
        annotations:
          summary: "Facebook API rate limit approaching"
```

## üìö Documentation

### **API Documentation**
- **Interactive API Docs**: http://localhost:8000/docs
- **OpenAPI Specification**: `/api/v1/openapi.json`
- **Postman Collection**: `docs/postman/ai-buyer.json`

### **Architecture Documentation**
- **System Design**: `docs/architecture/system-design.md`
- **Database Schema**: `docs/database/schema.md`  
- **Rules Engine Guide**: `docs/rules-engine/README.md`
- **ML Models Guide**: `docs/ml/models.md`

### **Deployment Guides**
- **Local Setup**: `docs/deployment/local.md`
- **Production Deployment**: `docs/deployment/production.md`
- **Kubernetes Deployment**: `docs/deployment/kubernetes.md`
- **Monitoring Setup**: `docs/monitoring/setup.md`

## üîí Security

### **Authentication & Authorization**
- **OAuth 2.0**: Facebook API integration
- **JWT Tokens**: API authentication
- **RBAC**: Role-based access control
- **API Keys**: Service-to-service authentication

### **Data Protection**
- **Encryption**: TLS 1.3 in transit, AES-256 at rest
- **PII Handling**: GDPR compliant data processing
- **Access Logs**: Comprehensive audit trails
- **Rate Limiting**: DDoS protection and abuse prevention

### **Security Monitoring**
- **Vulnerability Scanning**: Regular dependency audits
- **Penetration Testing**: Quarterly security assessments  
- **Compliance**: SOC 2 Type II, GDPR, CCPA
- **Incident Response**: 24/7 security monitoring

## ü§ù Contributing

### **Development Setup**

```bash
# Fork and clone the repository
git clone https://github.com/your-username/ai-buyer.git
cd ai-buyer

# Create feature branch
git checkout -b feature/your-feature-name

# Install pre-commit hooks
pre-commit install

# Make your changes and test
make test
make lint

# Submit pull request
git push origin feature/your-feature-name
```

### **Contribution Guidelines**
- Follow the [Code Style Guide](docs/development/code-style.md)
- Write comprehensive tests for new features
- Update documentation for API changes
- Follow [Conventional Commits](https://conventionalcommits.org/) format

## üìÑ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## üÜò Support

### **Community Support**
- **GitHub Issues**: Bug reports and feature requests
- **Discussions**: Community Q&A and ideas
- **Wiki**: Community-maintained documentation

### **Enterprise Support**
- **Professional Services**: Custom implementation and consulting
- **SLA Support**: 24/7 support with guaranteed response times
- **Training**: On-site and remote training programs

### **Contact**
- **Email**: support@ai-buyer.com
- **Slack**: [AI-Buyer Community](https://ai-buyer.slack.com)
- **Website**: https://ai-buyer.com

---

**Built with ‚ù§Ô∏è for the advertising automation community**

*AI-Buyer combines the reliability of rules-based automation with the intelligence of machine learning to deliver enterprise-grade Facebook advertising optimization at scale.*

## üõ† –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ –∑–∞–ø—É—Å–∫

### 1. –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é

```bash
git clone <repository-url>
cd ai-buyer
```

### 2. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

```bash
# –ö–æ–ø—ñ—é–π—Ç–µ –ø—Ä–∏–∫–ª–∞–¥ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
cp .env.development .env.local

# –í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ .env.local –∑ –≤–∞—à–∏–º–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è–º–∏
nano .env.local
```

### 3. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Facebook API

–î–æ–¥–∞–π—Ç–µ –≤–∞—à—ñ –¥–∞–Ω—ñ Facebook API —É `.env.local`:

```bash
FACEBOOK_APP_ID=your_app_id_here
FACEBOOK_APP_SECRET=your_app_secret_here
```

### 4. –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose

```bash
# –ó–±—ñ—Ä–∫–∞ —Ç–∞ –∑–∞–ø—É—Å–∫ –≤—Å—ñ—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤
docker-compose up -d

# –ü–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤
docker-compose logs -f

# –ó—É–ø–∏–Ω–∫–∞ —Å–µ—Ä–≤—ñ—Å—ñ–≤
docker-compose down
```

### 5. –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö

```bash
# –ó–∞–ø—É—Å–∫ –º—ñ–≥—Ä–∞—Ü—ñ–π ClickHouse
docker-compose exec backend python -m alembic upgrade head

# –ê–±–æ –≤—Ä—É—á–Ω—É
docker-compose exec clickhouse clickhouse-client < backend/migrations/001_clickhouse_schema.sql
```

## üåê –î–æ—Å—Ç—É–ø –¥–æ —Å–µ—Ä–≤—ñ—Å—ñ–≤

### –û—Å–Ω–æ–≤–Ω—ñ —Å–µ—Ä–≤—ñ—Å–∏

- **Frontend**: <http://localhost:3000>
- **Backend API**: <http://localhost:8000>
- **API Documentation**: <http://localhost:8000/docs>

### –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ç–∞ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è

- **ClickHouse**: <http://localhost:8123>
- **Kafka UI**: <http://localhost:8080>
- **MLflow**: <http://localhost:5000>
- **MinIO**: <http://localhost:9001>
- **Prometheus**: <http://localhost:9090>
- **Grafana**: <http://localhost:3001> (admin/admin)

### Development Tools

- **Redis**: localhost:6379
- **Kafka**: localhost:9092

## üîß –õ–æ–∫–∞–ª—å–Ω–∞ —Ä–æ–∑—Ä–æ–±–∫–∞

### Backend —Ä–æ–∑—Ä–æ–±–∫–∞

```bash
cd backend

# –°—Ç–≤–æ—Ä—ñ—Ç—å –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ
python -m venv venv
source venv/bin/activate  # Linux/Mac
# –∞–±–æ
venv\\Scripts\\activate  # Windows

# –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
pip install -r requirements.txt

# –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä —Ä–æ–∑—Ä–æ–±–∫–∏
uvicorn api.main:app --reload --host 0.0.0.0 --port 8000
```

### Frontend —Ä–æ–∑—Ä–æ–±–∫–∞

```bash
cd frontend

# –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
npm install

# –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä —Ä–æ–∑—Ä–æ–±–∫–∏
npm run dev
```

### Celery Worker (–¥–ª—è ML –∑–∞–¥–∞—á)

```bash
cd backend

# –ó–∞–ø—É—Å—Ç—ñ—Ç—å Celery worker
celery -A backend.tasks.celery_app worker --loglevel=info --concurrency=4

# –ó–∞–ø—É—Å—Ç—ñ—Ç—å Celery beat (–¥–ª—è –ø–ª–∞–Ω—É–≤–∞–ª—å–Ω–∏–∫–∞)
celery -A backend.tasks.celery_app beat --loglevel=info
```

## üìä –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è ML —Ñ—É–Ω–∫—Ü—ñ–π

### CTR Prediction

```python
from backend.ml.models.ctr_predictor import CTRPredictor

predictor = CTRPredictor()
features = {
    'age_range': '25-34',
    'gender': 'all',
    'device_platform': 'mobile',
    'bid_amount': 1.50,
    'ad_relevance_score': 8
}

prediction = predictor.predict(features)
print(f"Predicted CTR: {prediction['ctr_prediction']:.4f}")
```

### Budget Optimization

```python
from backend.ml.models.budget_optimizer import BudgetOptimizer

optimizer = BudgetOptimizer()
campaigns = [
    {'campaign_id': 'camp1', 'current_budget': 100},
    {'campaign_id': 'camp2', 'current_budget': 200}
]

recommendations = optimizer.optimize_budget_allocation(campaigns)
print(f"Optimization complete: {len(recommendations)} recommendations")
```

### Real-time Streaming

```python
from backend.services.streaming_service import get_streaming_service

# –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–∏—Ö –∫–∞–º–ø–∞–Ω—ñ—ó
service = get_streaming_service()
await service.stream_campaign_data(
    user_id="user123",
    campaigns_data=[campaign_metrics]
)
```

## üîç –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ç–∞ –ª–æ–≥–∏

### –ü–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤

```bash
# –í—Å—ñ —Å–µ—Ä–≤—ñ—Å–∏
docker-compose logs -f

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π —Å–µ—Ä–≤—ñ—Å
docker-compose logs -f backend
docker-compose logs -f frontend
docker-compose logs -f celery-worker
```

### –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ

- **Grafana Dashboard**: <http://localhost:3001>
- **Prometheus Metrics**: <http://localhost:9090>
- **ML Model Metrics**: <http://localhost:5000> (MLflow)

### Health Checks

```bash
# Backend health
curl http://localhost:8000/health

# ML models status
curl http://localhost:8000/api/v1/ml/health

# Database status
curl http://localhost:8123/ping
```

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### Backend —Ç–µ—Å—Ç–∏

```bash
cd backend
pytest tests/ -v --cov=backend
```

### Frontend —Ç–µ—Å—Ç–∏

```bash
cd frontend
npm run test
npm run test:coverage
```

### Integration —Ç–µ—Å—Ç–∏

```bash
# –ó–∞–ø—É—Å—Ç—ñ—Ç—å –ø–æ–≤–Ω–∏–π —Ç–µ—Å—Ç–æ–≤–∏–π —Å—Ç–µ–∫
docker-compose -f docker-compose.test.yml up --abort-on-container-exit
```

## üìñ API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

### ML API Endpoints

- `POST /api/v1/ml/predict/ctr` - CTR –ø—Ä–æ–≥–Ω–æ–∑—É–≤–∞–Ω–Ω—è
- `POST /api/v1/ml/optimize/budget` - –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –±—é–¥–∂–µ—Ç—É
- `GET /api/v1/ml/detect/anomalies` - –í–∏—è–≤–ª–µ–Ω–Ω—è –∞–Ω–æ–º–∞–ª—ñ–π
- `GET /api/v1/ml/models` - –°–ø–∏—Å–æ–∫ ML –º–æ–¥–µ–ª–µ–π

### Campaign API Endpoints

- `GET /api/v1/campaigns` - –°–ø–∏—Å–æ–∫ –∫–∞–º–ø–∞–Ω—ñ–π
- `POST /api/v1/campaigns` - –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–∞–º–ø–∞–Ω—ñ—ó
- `PUT /api/v1/campaigns/{id}` - –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–∞–º–ø–∞–Ω—ñ—ó
- `GET /api/v1/campaigns/{id}/metrics` - –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞–º–ø–∞–Ω—ñ—ó

### Analytics API Endpoints

- `GET /api/v1/analytics/dashboard` - Dashboard –¥–∞–Ω—ñ
- `GET /api/v1/analytics/performance` - –ê–Ω–∞–ª—ñ–∑ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ
- `GET /api/v1/analytics/trends` - –ê–Ω–∞–ª—ñ–∑ —Ç—Ä–µ–Ω–¥—ñ–≤

## üöÄ –ü—Ä–æ–¥–∞–∫—à–Ω –¥–µ–ø–ª–æ–π

### AWS/GCP/Azure

```bash
# –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω—É
export ENVIRONMENT=production
export CLICKHOUSE_HOST=your-clickhouse-host
export KAFKA_BOOTSTRAP_SERVERS=your-kafka-cluster
export MLFLOW_TRACKING_URI=your-mlflow-server

# –î–µ–ø–ª–æ–π –∑ Docker
docker-compose -f docker-compose.prod.yml up -d
```

### Kubernetes

```bash
# –ó–∞—Å—Ç–æ—Å—É–π—Ç–µ Kubernetes –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
kubectl apply -f k8s/

# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç–∞—Ç—É—Å
kubectl get pods -n ai-buyer
```

## üõ° –ë–µ–∑–ø–µ–∫–∞

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó

- –ó–º—ñ–Ω—ñ—Ç—å –≤—Å—ñ –ø–∞—Ä–æ–ª—ñ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ HTTPS —É –ø—Ä–æ–¥–∞–∫—à–Ω—ñ
- –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –±—Ä–∞–Ω–¥–º–∞—É–µ—Ä –¥–ª—è –æ–±–º–µ–∂–µ–Ω–Ω—è –¥–æ—Å—Ç—É–ø—É
- –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–Ω–æ–≤–ª—é–π—Ç–µ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
- –£–≤—ñ–º–∫–Ω—ñ—Ç—å –∞—É–¥–∏—Ç API –∑–∞–ø–∏—Ç—ñ–≤

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è

```bash
# –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è JWT —Å–µ–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞
openssl rand -base64 32

# –î–æ–¥–∞–π—Ç–µ –¥–æ .env.local
JWT_SECRET=your-generated-secret
```

## üìà –ú–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è

### Horizontal Scaling

- –î–æ–¥–∞–π—Ç–µ –±—ñ–ª—å—à–µ Celery workers –¥–ª—è ML –∑–∞–¥–∞—á
- –ú–∞—Å—à—Ç–∞–±—É–π—Ç–µ Kafka partitions –¥–ª—è –±—ñ–ª—å—à–æ–≥–æ throughput
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ ClickHouse –∫–ª–∞—Å—Ç–µ—Ä –¥–ª—è –≤–µ–ª–∏–∫–∏—Ö –æ–±—Å—è–≥—ñ–≤ –¥–∞–Ω–∏—Ö

### Performance Optimization

- –ù–∞–ª–∞—à—Ç—É–π—Ç–µ connection pooling
- –£–≤—ñ–º–∫–Ω—ñ—Ç—å –∫–µ—à—É–≤–∞–Ω–Ω—è Redis
- –û–ø—Ç–∏–º—ñ–∑—É–π—Ç–µ ClickHouse –∑–∞–ø–∏—Ç–∏
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ CDN –¥–ª—è —Å—Ç–∞—Ç–∏—á–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤

## ü§ù –ö–æ–Ω—Ç—Ä–∏–±—é—Ü—ñ—è

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π
2. –°—Ç–≤–æ—Ä—ñ—Ç—å feature branch (`git checkout -b feature/amazing-feature`)
3. Commit –∑–º—ñ–Ω–∏ (`git commit -m 'Add amazing feature'`)
4. Push –¥–æ branch (`git push origin feature/amazing-feature`)
5. –í—ñ–¥–∫—Ä–∏–π—Ç–µ Pull Request

## üìÑ –õ—ñ—Ü–µ–Ω–∑—ñ—è

–¶–µ–π –ø—Ä–æ–µ–∫—Ç –ª—ñ—Ü–µ–Ω–∑–æ–≤–∞–Ω–æ –ø—ñ–¥ MIT License - –¥–∏–≤—ñ—Ç—å—Å—è [LICENSE](LICENSE) —Ñ–∞–π–ª –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

## üìû –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

- üìß Email: <support@ai-buyer.com>
- üí¨ Discord: [AI-Buyer Community](https://discord.gg/ai-buyer)
- üìñ Documentation: [docs.ai-buyer.com](https://docs.ai-buyer.com)
- üêõ Issues: [GitHub Issues](https://github.com/ai-buyer/ai-buyer/issues)

## üôè –ü–æ–¥—è–∫–∏

- [DeepCTR](https://github.com/shenweichen/DeepCTR) - –ó–∞ CTR prediction –º–æ–¥–µ–ª—ñ
- [Prophet](https://facebook.github.io/prophet/) - –ó–∞ time series forecasting
- [FastAPI](https://fastapi.tiangolo.com/) - –ó–∞ —á—É–¥–æ–≤–∏–π API framework
- [ClickHouse](https://clickhouse.com/) - –ó–∞ –≤–∏—Å–æ–∫–æ–ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—É –∞–Ω–∞–ª—ñ—Ç–∏—á–Ω—É –ë–î
