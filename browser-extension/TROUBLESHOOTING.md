# üîß –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø–æ–º–∏–ª–∫–∏ "Could not establish connection"

## –û–ø–∏—Å –ø—Ä–æ–±–ª–µ–º–∏
–ü–æ–º–∏–ª–∫–∞ "Could not establish connection. Receiving end does not exist" –≤–∏–Ω–∏–∫–∞—î –∫–æ–ª–∏ popup script –Ω–µ –º–æ–∂–µ –∑–≤'—è–∑–∞—Ç–∏—Å—è –∑ content script.

## ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è, —è–∫—ñ –±—É–ª–æ –∑—Ä–æ–±–ª–µ–Ω–æ:

### 1. –î–æ–¥–∞–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –∑–≤'—è–∑–∫—É
- –î–æ–¥–∞–Ω–æ ping-–∑–∞–ø–∏—Ç –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ content script
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —ñ–Ω–∂–µ–∫—Ü—ñ—è content script –ø—Ä–∏ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ—Å—Ç—ñ

### 2. –û–Ω–æ–≤–ª–µ–Ω–æ –¥–æ–∑–≤–æ–ª–∏ –≤ manifest.json
```json
"permissions": [
  "activeTab",
  "cookies", 
  "storage",
  "scripting"  // ‚Üê –ù–æ–≤–∏–π –¥–æ–∑–≤—ñ–ª
]
```

### 3. –ü–æ–∫—Ä–∞—â–µ–Ω–æ –æ–±—Ä–æ–±–∫—É –ø–æ–º–∏–ª–æ–∫
- –î–µ—Ç–∞–ª—å–Ω—ñ—à—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è content script
- –ö—Ä–∞—â—ñ –ª–æ–≥–∏ –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

## üöÄ –ö—Ä–æ–∫–∏ –ø–æ —É—Å—Ç–∞–Ω–æ–≤—Ü—ñ –æ–Ω–æ–≤–ª–µ–Ω–æ–≥–æ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è:

### –í–∞—Ä—ñ–∞–Ω—Ç 1: –û–Ω–æ–≤–ª–µ–Ω–Ω—è —ñ—Å–Ω—É—é—á–æ–≥–æ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è
1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ `chrome://extensions/`
2. –ó–Ω–∞–π–¥—ñ—Ç—å "AI-Buyer Facebook Token Extractor"
3. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫—É –æ–Ω–æ–≤–ª–µ–Ω–Ω—è (üîÑ)

### –í–∞—Ä—ñ–∞–Ω—Ç 2: –ü–æ–≤–Ω–µ –ø–µ—Ä–µ–≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è
1. –í–∏–¥–∞–ª—ñ—Ç—å —Å—Ç–∞—Ä–µ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è –∑ `chrome://extensions/`
2. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Ä–æ–∑–ø–∞–∫–æ–≤–∞–Ω–µ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è"
3. –í–∏–±–µ—Ä—ñ—Ç—å –ø–∞–ø–∫—É `/Users/yaroslavsaienko/ai-buyer/browser-extension`

### –í–∞—Ä—ñ–∞–Ω—Ç 3: –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∞—Ä—Ö—ñ–≤—É
1. –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ —Ñ–∞–π–ª `browser-extension.zip`
2. –£ `chrome://extensions/` –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å "–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Ä–æ–∑–ø–∞–∫–æ–≤–∞–Ω–µ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è"
3. –†–æ–∑–ø–∞–∫—É–π—Ç–µ —ñ –≤–∏–±–µ—Ä—ñ—Ç—å –ø–∞–ø–∫—É

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è:

### 1. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ `chrome://extensions/`
2. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è –∞–∫—Ç–∏–≤–Ω–µ
3. –Ü–∫–æ–Ω–∫–∞ –ø–æ–≤–∏–Ω–Ω–∞ –∑'—è–≤–∏—Ç–∏—Å—è –≤ –ø–∞–Ω–µ–ª—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤

### 2. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –Ω–∞ Facebook
1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ `https://business.facebook.com/adsmanager/`
2. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—è —É –≤–∞—à–æ–º—É –∞–∫–∞—É–Ω—Ç—ñ
3. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ —ñ–∫–æ–Ω–∫—É —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è
4. –ü–æ–≤–∏–Ω–µ–Ω –∑'—è–≤–∏—Ç–∏—Å—è –∑–µ–ª–µ–Ω–∏–π —Å—Ç–∞—Ç—É—Å "‚úÖ Facebook —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –∑–Ω–∞–π–¥–µ–Ω–∞"

### 3. –í–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è —Ç–æ–∫–µ–Ω–∞
1. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫—É "–í–∏—Ç—è–≥—Ç–∏ –¥–∞–Ω—ñ –∑ Facebook"
2. –î–æ—á–µ–∫–∞–π—Ç–µ—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å—É
3. –ü–æ–≤–∏–Ω–Ω—ñ –∑'—è–≤–∏—Ç–∏—Å—è –¥–∞–Ω—ñ –ø—Ä–æ —Ç–æ–∫–µ–Ω, cookies —Ç–∞ UserAgent

## üêõ –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø–æ–º–∏–ª–æ–∫:

### –Ø–∫—â–æ –ø–æ–º–∏–ª–∫–∞ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å—Å—è:
1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ DevTools (F12)
2. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ –≤–∫–ª–∞–¥–∫—É Console
3. –û–Ω–æ–≤—ñ—Ç—å —Å—Ç–æ—Ä—ñ–Ω–∫—É Facebook
4. –°–ø—Ä–æ–±—É–π—Ç–µ –≤–∏—Ç—è–≥—Ç–∏ –¥–∞–Ω—ñ –∑–Ω–æ–≤—É
5. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª—ñ

### –¢–∏–ø–æ–≤—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ –∫–æ–Ω—Å–æ–ª—ñ:
- `ü§ñ AI-Buyer: Content script loaded on` - content script –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∏–π
- `üì® –û—Ç—Ä–∏–º–∞–Ω–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è:` - –æ—Ç—Ä–∏–º–∞–Ω–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤—ñ–¥ popup
- `‚úÖ Token –∑–Ω–∞–π–¥–µ–Ω–æ –≤ localStorage` - —Ç–æ–∫–µ–Ω —É—Å–ø—ñ—à–Ω–æ –∑–Ω–∞–π–¥–µ–Ω–∏–π

### –Ø–∫—â–æ —Ç–æ–∫–µ–Ω –Ω–µ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è:
1. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤–∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ñ –≤ Facebook Ads Manager
2. –°–ø—Ä–æ–±—É–π—Ç–µ –æ–Ω–æ–≤–∏—Ç–∏ —Å—Ç–æ—Ä—ñ–Ω–∫—É
3. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –±—É–¥—å-—è–∫—É –∫–∞–º–ø–∞–Ω—ñ—é –∞–±–æ —Å—Ç–æ—Ä—ñ–Ω–∫—É –∑ —Ä–µ–∫–ª–∞–º–æ—é
4. –¢–æ–∫–µ–Ω –º–æ–∂–µ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏—Å—è –≤ —Ä—ñ–∑–Ω–∏—Ö –º—ñ—Å—Ü—è—Ö –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Å—Ç–æ—Ä—ñ–Ω–∫–∏

## üìä –î–æ–¥–∞—Ç–∫–æ–≤—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ:

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏—è–≤–ª–µ–Ω–Ω—è —Ç–æ–∫–µ–Ω–∞
- –†–æ–∑—à–∏—Ä–µ–Ω–Ω—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —à—É–∫–∞—î —Ç–æ–∫–µ–Ω –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
- –ü–æ–∫–∞–∑—É—î badge (üéØ) –ø—Ä–∏ –≤–∏—è–≤–ª–µ–Ω–Ω—ñ Facebook —Å—Ç–æ—Ä—ñ–Ω–∫–∏
- –ó–±–µ—Ä—ñ–≥–∞—î –æ—Å—Ç–∞–Ω–Ω—ñ–π –∑–Ω–∞–π–¥–µ–Ω–∏–π —Ç–æ–∫–µ–Ω

### –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ AI-Buyer
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è localhost –ø–æ—Ä—Ç—ñ–≤
- –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –≤–ª–∞—Å–Ω–∏–π URL AI-Buyer —Å–µ—Ä–≤–µ—Ä–∞
- –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –º—ñ–∂ —Å–µ—Å—ñ—è–º–∏

## üîß –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ –∑–º—ñ–Ω:

### popup.js
```javascript
// –î–æ–¥–∞–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –∑–≤'—è–∑–∫—É
try {
  response = await chrome.tabs.sendMessage(currentTab.id, {
    action: "ping",
  });
} catch (error) {
  // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —ñ–Ω–∂–µ–∫—Ü—ñ—è content script
  await chrome.scripting.executeScript({
    target: { tabId: currentTab.id },
    files: ['content.js']
  });
}
```

### content.js
```javascript
// –î–æ–¥–∞–Ω–æ –æ–±—Ä–æ–±–Ω–∏–∫ ping
if (request.action === "ping") {
  sendResponse({ success: true, message: "Content script –∞–∫—Ç–∏–≤–Ω–∏–π" });
  return true;
}
```

### background.js
```javascript
// –î–æ–¥–∞–Ω–æ —Ñ—É–Ω–∫—Ü—ñ—é –¥–ª—è –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è content script
async function ensureContentScriptLoaded(tabId) {
  // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —ñ–Ω–∂–µ–∫—Ü—ñ—è –ø—Ä–∏ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ—Å—Ç—ñ
}
```

## üìû –ü—ñ–¥—Ç—Ä–∏–º–∫–∞
–Ø–∫—â–æ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ –≤–∏—Ä—ñ—à–µ–Ω–∞:
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤–µ—Ä—Å—ñ—é Chrome (—Ä–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è –æ—Å—Ç–∞–Ω–Ω—è)
2. –°–ø—Ä–æ–±—É–π—Ç–µ –≤ —Ä–µ–∂–∏–º—ñ —ñ–Ω–∫–æ–≥–Ω—ñ—Ç–æ
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –Ω–µ–º–∞—î –±–ª–æ–∫—É–≤–∞–ª—å–Ω–∏–∫—ñ–≤ —Ä–µ–∫–ª–∞–º–∏
4. –í—ñ–¥–∫–ª—é—á—ñ—Ç—å —ñ–Ω—à—ñ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è —Ç–∏–º—á–∞—Å–æ–≤–æ

–†–æ–∑—à–∏—Ä–µ–Ω–Ω—è —Ç–µ–ø–µ—Ä –º–∞—î –∑–Ω–∞—á–Ω–æ –∫—Ä–∞—â—É —Å—Ç—ñ–π–∫—ñ—Å—Ç—å –¥–æ –ø–æ–º–∏–ª–æ–∫ –∑–≤'—è–∑–∫—É! üöÄ