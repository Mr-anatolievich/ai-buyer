#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø–µ—Ä–µ–±—É–¥–æ–≤–∏ –±—Ä–∞—É–∑–µ—Ä–Ω–æ–≥–æ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è AI-Buyer

echo "üîß –ü–µ—Ä–µ–±—É–¥–æ–≤–∞ –±—Ä–∞—É–∑–µ—Ä–Ω–æ–≥–æ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è AI-Buyer..."

cd "$(dirname "$0")"

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞, —á–∏ —ñ—Å–Ω—É—é—Ç—å –≤—Å—ñ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ —Ñ–∞–π–ª–∏
REQUIRED_FILES=("manifest.json" "popup.html" "popup.js" "content.js" "background.js")

for file in "${REQUIRED_FILES[@]}"; do
    if [ ! -f "$file" ]; then
        echo "‚ùå –§–∞–π–ª $file –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ!"
        exit 1
    fi
done

echo "‚úÖ –í—Å—ñ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ —Ñ–∞–π–ª–∏ –∑–Ω–∞–π–¥–µ–Ω–æ"

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ —ñ–∫–æ–Ω–æ–∫
if [ ! -d "icons" ]; then
    echo "‚ö†Ô∏è –ü–∞–ø–∫–∞ icons –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–∞, —Å—Ç–≤–æ—Ä—é—î–º–æ..."
    mkdir -p icons
fi

# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞—Ä—Ö—ñ–≤—É —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è
echo "üì¶ –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞—Ä—Ö—ñ–≤—É —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è..."

# –í–∏–¥–∞–ª—è—î–º–æ —Å—Ç–∞—Ä–∏–π –∞—Ä—Ö—ñ–≤
rm -f ../browser-extension.zip

# –°—Ç–≤–æ—Ä—é—î–º–æ –Ω–æ–≤–∏–π –∞—Ä—Ö—ñ–≤
zip -r ../browser-extension.zip . -x "*.DS_Store" "*.git*" "rebuild.sh" "README.md" "UPDATE_INSTRUCTIONS.md"

echo "‚úÖ –ê—Ä—Ö—ñ–≤ browser-extension.zip —Å—Ç–≤–æ—Ä–µ–Ω–æ —É—Å–ø—ñ—à–Ω–æ!"

echo ""
echo "üìã –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –ø–æ —É—Å—Ç–∞–Ω–æ–≤—Ü—ñ:"
echo "1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ Chrome://extensions/"
echo "2. –£–≤—ñ–º–∫–Ω—ñ—Ç—å —Ä–µ–∂–∏–º —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞"
echo "3. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å '–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Ä–æ–∑–ø–∞–∫–æ–≤–∞–Ω–µ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è'"
echo "4. –í–∏–±–µ—Ä—ñ—Ç—å –ø–∞–ø–∫—É browser-extension"
echo "5. –ê–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ –∞—Ä—Ö—ñ–≤ browser-extension.zip"
echo ""
echo "üîß –î–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —ñ—Å–Ω—É—é—á–æ–≥–æ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è:"
echo "1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ Chrome://extensions/"
echo "2. –ó–Ω–∞–π–¥—ñ—Ç—å 'AI-Buyer Facebook Token Extractor'"
echo "3. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫—É –æ–Ω–æ–≤–ª–µ–Ω–Ω—è (üîÑ)"
echo ""
echo "üéØ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:"
echo "1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ facebook.com/adsmanager"
echo "2. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—è —É –≤–∞—à–æ–º—É –∞–∫–∞—É–Ω—Ç—ñ"
echo "3. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ —ñ–∫–æ–Ω–∫—É —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è"
echo "4. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å '–í–∏—Ç—è–≥—Ç–∏ –¥–∞–Ω—ñ'"
echo ""

# –ü–æ–∫–∞–∑—É—î–º–æ –≤–µ—Ä—Å—ñ—é
VERSION=$(grep '"version"' manifest.json | cut -d'"' -f4)
echo "üìå –í–µ—Ä—Å—ñ—è —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è: $VERSION"

echo "üöÄ –ì–æ—Ç–æ–≤–æ!"